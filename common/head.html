<!-- add current user's nsfw preferences to body tag -->
<!-- update -->
<!-- <script type="text/discourse-plugin" version="0.8">
    // text/discourse-plugin
    // https://meta.discourse.org/t/css-classes-for-group-membership-for-simplified-ui-mode/60838/2
    const TopicRoute = require("discourse/routes/topic").default;
  
  TopicRoute.reopen({
      activate: function() {
          this._super();
          Em.run.next(function() {
              $('body').on('contextmenu', '.cooked img, .mfp-img', function(e){ return false; });
          if (window.jQuery) {
            window.jQuery(function ($) {
              let u = api.getCurrentUser();
              const uGroups = u.groups;
              const hasR18Group = uGroups.find((value) => {
                const r18showedId = 53;
                return value["id"] === r18showedId ? true : false;
              });
              // always show NSFW
              if (hasR18Group !== undefined) {
                console.log("show nsfw for user.");
                $("body").addClass("nsfw-always-show");
              }
            });
            $(document).ready(function () {
                $("a.lightbox").children().unwrap();
                console.log("disable right click on image lightbox.")
            });
          }
        });
      }
  });
    
  </script> -->

<script type="text/discourse-plugin" version="0.8">

    Discourse.ExternalNavItem = Discourse.NavItem.extend({
        href : function() {
          return this.get('href');
        }.property('href')
      });
    
      I18n.translations.zh_CN.js.filters.create_order = { title: "创建顺序", help: "创建顺序从早到晚排列" };
      Discourse.NavItem.reopenClass({
        buildList : function(category, args) {
          var list = this._super(category, args);
          if(!category) {
            list.push(Discourse.ExternalNavItem.create({href: '?ascending=true&order=created', name: 'create_order'}));
          }
          return list;
        }
      });
    </script>