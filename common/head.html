<!-- add current user's nsfw preferences to body tag -->
<!-- update -->
<!-- <script type="text/discourse-plugin" version="0.8">
    // text/discourse-plugin
    // https://meta.discourse.org/t/css-classes-for-group-membership-for-simplified-ui-mode/60838/2
    const TopicRoute = require("discourse/routes/topic").default;
  
  TopicRoute.reopen({
      activate: function() {
          this._super();
          Em.run.next(function() {
              $('body').on('contextmenu', '.cooked img, .mfp-img', function(e){ return false; });
          if (window.jQuery) {
            window.jQuery(function ($) {
              let u = api.getCurrentUser();
              const uGroups = u.groups;
              const hasR18Group = uGroups.find((value) => {
                const r18showedId = 53;
                return value["id"] === r18showedId ? true : false;
              });
              // always show NSFW
              if (hasR18Group !== undefined) {
                console.log("show nsfw for user.");
                $("body").addClass("nsfw-always-show");
              }
            });
            $(document).ready(function () {
                $("a.lightbox").children().unwrap();
                console.log("disable right click on image lightbox.")
            });
          }
        });
      }
  });
    
  </script> -->

  <!-- text/discourse-plugin -->
<script type="text/discourse-plugin" version="0.8">
  $(document).ready(function () {
    console.log('test');

    if($("a#sort-topic-order")){
      const ascending="?ascending=true&order=created"
      const decending="?order=created"
      let a=$("a#sort-topic-order")[0];
      console.log(a);
      console.log(window.location.search);

      if(window.location.search.match("ascending")){
        a.href=decending;
        a.style="transform:rotate(180deg);"
      }else{
        a.href=ascending;
      }
    }
});
</script>
