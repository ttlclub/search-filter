<!--

<script type="text/discourse-plugin" version="0.8">
    api.modifyClass("controller:user", {
        forceExpand: true ,
        collapsedInfo: false,
        collapsedInfoState:{
            isExpanded: true,
            icon: "angle-double-up",
            label: "collapse_profile",
            ariaLabel: "user.sr_collapse_profile",
            action: "expandProfile",
        },
    });
</script>

<script type="text/discourse-plugin" version="0.8"></script>
    api.addPostMenuButton('coffee', () => {
        return {
            action: 'like',
            icon: 'coffee',
            className: 'hot-coffee',
            title: 'coffee.title',
            position: 'first'
        };
    });
</script>

<script type="text/discourse-plugin" version="0.8">
    api.modifyClass("component:topic-notifications-button", {
        appendReason: false,
        showFullTitle: false,

    });
</script>




-->

<script type="text/discourse-plugin" version="0.8">
    api.modifyClass("component:topic-notifications-button", {
        appendReason: false,
        showFullTitle: false,
    });
</script>

<script type="text/discourse-plugin" version="0.8">


</script>

<!-- add current user's nsfw preferences to body tag -->
<!-- update -->
<script type="text/discourse-plugin" version="0.8">
    // text/discourse-plugin
    // https://meta.discourse.org/t/css-classes-for-group-membership-for-simplified-ui-mode/60838/2
    if (window.jQuery) {
      window.jQuery(function ($) {
        let u = api.getCurrentUser();
        const uGroups = u.groups;
        const hasR18Group = uGroups.find((value) => {
          const r18showedId = 53;
          return value["id"] === r18showedId ? true : false;
        });
        // always show NSFW
        if (hasR18Group !== undefined) {
          console.log("show nsfw for user");
          $("body").addClass("nsfw-always-show");
        }
      });
      $(document).ready(function () {
        $scope.$on("$routeChangeSuccess", function(event, currentRoute, previousRoute){ 
          $("a.lightbox").children().unwrap();
      }); 
      });
    }
  </script>